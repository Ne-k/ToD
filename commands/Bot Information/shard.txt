const AsciiTable = require('ascii-table')

module.exports = {
    config: {
        name: "shard",
        usage: "t;policy",
        description: "Shows ToD (truth or dare)'s private policy stating if information is stored or collected.",
    
    },
    run: async (client, message, args) => {

        const table = new AsciiTable()
        .setHeading('Shard', 'Servers','Ping')
        .setAlign(0, AsciiTable.CENTER)
        .setAlign(1, AsciiTable.CENTER)
        .setAlign(2, AsciiTable.CENTER)
        .removeBorder()
      const guildCount = await client.shard.fetchClientValues('guilds.cache.size')
    
      const ping = await client.shard.fetchClientValues('ws.ping')
      guildCount.forEach((count, shardId) => {
        table.addRow(shardId, count, `${ping[shardId]}ms`)
      })
      message.channel.send(`\`\`\`${table.toString()}\`\`\``)
    
    }
}